import { useParams, Link } from 'react-router-dom'
import { useProduct } from '../hooks/useProducts'
import useProductStore from '../store/useProductStore'
export default function ProductDetailPage(){ const { id } = useParams(); const { data: product, isLoading } = useProduct(id); const getLocal = useProductStore(state=> state.products).find(p=> p.id === Number(id)); const display = product || getLocal; if(isLoading) return <p className='text-center mt-6'>Loading...</p>; if(!display) return <p className='text-center mt-6 text-red-500'>Product not found</p>; return (<section className='mt-6 max-w-3xl mx-auto card p-6 rounded-2xl shadow-sm border'><div className='flex items-start gap-6'><img src={display.image} alt={display.name} className='w-48 h-36 object-cover rounded-lg' /><div className='flex-1'><h1 className='text-2xl font-bold'>{display.name}</h1><p className='text-sm text-gray-500 dark:text-gray-400'>{display.category} • ⭐ {display.rating}</p><p className='mt-4 text-gray-700'>{display.stock > 20 ? 'Plenty in stock' : 'Limited stock'}</p><p className='mt-2 text-sky-600 font-bold text-2xl'>${display.price}</p></div></div><div className='mt-6 flex gap-3'><button className='px-4 py-2 bg-sky-600 text-white rounded-lg'>Buy Now</button><Link to='/products' className='text-sky-600'>← Back to catalog</Link></div></section>) }
