import { useState } from 'react'
import useAuth from '../store/useAuth'
import { useNavigate } from 'react-router-dom'
export default function AuthPage(){ const [mode, setMode] = useState('login'); const [email, setEmail] = useState(''); const [password, setPassword] = useState(''); const [name, setName] = useState(''); const auth = useAuth(); const nav = useNavigate(); const submit = async (e) =>{ e.preventDefault(); if(mode==='login'){ const res = await auth.login(email,password); if(res.ok){ nav('/profile') } else alert(res.message || 'Login failed') } else { const res = await auth.signup(name,email,password); if(res.ok){ nav('/profile') } else alert(res.message || 'Signup failed') } }; return (<section className='mt-6 max-w-md mx-auto card p-6 rounded-2xl shadow-sm border'><h1 className='text-2xl font-semibold mb-4'>{mode==='login'? 'Login' : 'Sign Up'}</h1><form onSubmit={submit} className='space-y-3'>{mode==='signup' && <input required placeholder='Full name' value={name} onChange={e=>setName(e.target.value)} className='w-full p-2 border rounded'/>}<input required placeholder='Email' value={email} onChange={e=>setEmail(e.target.value)} className='w-full p-2 border rounded' type='email'/><input required placeholder='Password' value={password} onChange={e=>setPassword(e.target.value)} className='w-full p-2 border rounded' type='password'/><div className='flex items-center justify-between'><button className='px-4 py-2 bg-sky-600 text-white rounded'>{mode==='login'? 'Login' : 'Create account'}</button><button type='button' onClick={()=> setMode(mode==='login'?'signup':'login')} className='text-sm text-sky-600'>{mode==='login'? 'Create account' : 'Have an account? Login'}</button></div></form></section>) }
